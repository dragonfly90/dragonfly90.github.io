<!doctype html>
<html lang="en">

  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>Myrmidon Books Ltd Utils</title>
    <meta name="description" content="The personal website of software developer Chris Cummins.">
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="msapplication-tooltip" content="Chris Cummins personal website">

    <link rel="stylesheet" href="/css/app.css" />
    <link rel="stylesheet" href="//netdna.bootstrapcdn.com/font-awesome/3.1.0/css/font-awesome.css" />

    <link rel="icon" href="/favicon.ico" type="image/x-icon">
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">

    <script type="text/javascript">var _gaq=_gaq||[];_gaq.push(["_setAccount","UA-40829804-1"]);_gaq.push(["_trackPageview"]);(function(){var b=document.createElement("script");b.type="text/javascript";b.async=true;b.src=("https:"==document.location.protocol?"https://ssl":"http://www")+".google-analytics.com/ga.js";var a=document.getElementsByTagName("script")[0];a.parentNode.insertBefore(b,a)})();</script>

  </head>

  <body>

    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
    <script src="//ajax.googleapis.com/ajax/libs/jqueryui/1.10.3/jquery-ui.min.js"></script>
    <script src="//netdna.bootstrapcdn.com/twitter-bootstrap/2.3.1/js/bootstrap.min.js"></script>
    <script src="/js/app-components.js"></script>

    <style>
  #buy-now-output {
    width: 100%;
    resize: none;
  }
</style>

<div id="wrap">
  <div class="container">

    <div class="headline">
      <h1 class="headline-title">
        Myrmidon
      </h1>
    </div>

    <div class="row">
      <div class="span12">
        <h4 style="text-align:center;">Buy Now buttons generator</h4>
        <hr />
      </div>
    </div>
    <div class="row">
      <div class="span6">
        <form class="form-horizontal" method="POST">
          <fieldset>

            <!-- Text input-->
            <div class="control-group">
              <label class="control-label" for="amazon-url">Amazon URL:</label>
              <div class="controls">
                <input id="amazon-url" name="amazon-url" type="text" placeholder="e.g. http://amzn.to/1ihC5EZ" class="input-xlarge">

              </div>
            </div>

            <!-- Text input-->
            <div class="control-group">
              <label class="control-label" for="kindle-url">Kindle URL:</label>
              <div class="controls">
                <input id="kindle-url" name="kindle-url" type="text" placeholder="e.g. http://amzn.to/1lPKFvr" class="input-xlarge">

              </div>
            </div>

            <!-- Text input-->
            <div class="control-group">
              <label class="control-label" for="waterstones-url">Waterstones URL</label>
              <div class="controls">
                <input id="waterstones-url" name="waterstones-url" type="text" placeholder="e.g. http://www.waterstones.com/waterstonesweb/products/toby+frost/a+game+of+battleships/9816607/" class="input-xlarge">

              </div>
            </div>

            <!-- Text input-->
            <div class="control-group">
              <label class="control-label" for="isbn-13">ISBN-13</label>
              <div class="controls">
                <input id="isbn-13" name="isbn-13" type="text" placeholder="e.g. 978-1905802777" class="input-xlarge">

              </div>
            </div>

            <!-- Button -->
            <div class="control-group">
              <label class="control-label" for="buy-now-submit"></label>
              <div class="controls">
                <button id="buy-now-submit" name="buy-now-submit" class="btn btn-danger">Generate</button>
              </div>
            </div>

          </fieldset>
        </form>
      </div>

      <div class="span6">
        <textarea id="buy-now-output" rows="12" readonly></textarea>
      </div>
    </div>
  </div>
  <div id="push"></div>
</div>

<div class="footer">
  <div class="container wrapper">
    By <a href="/">Chris Cummins</a>.
  </div>
</div>

<script>
  $('#buy-now-submit').click(function(e) {
    e.preventDefault();

    $('#buy-now-output').text((function() {
      var s = '',
          amazon = $('#amazon-url').val().trim(),
          kindle = $('#kindle-url').val().trim(),
          waterstones = $('#waterstones-url').val().trim(),
          isbn13 = $('#isbn-13').val().trim(),
          link = function(title, url, classes) {
            return '<a class="myrm-btn ' + classes + '" href="' + url +
              '" target="_blank" title="Link opens in new window">' + title +
              '</a> ';
          };

      s = '<hr />\n<div class="shop-links"><h3>Buy now</h3>\n<p style="text-align:center;">'

      if (amazon)
        s += link('Amazon', amazon, 'btn-amazon');

      if (kindle)
        s += link('Kindle', kindle, 'btn-kindle');

      if (waterstones)
        s += link('Waterstones', waterstones, 'btn-waterstones');

      if (isbn13)
        s += link('iBookstore', 'http://itunes.apple.com/gn/book/isbn' + isbn13.replace(/-/g, ''), 'btn-ibookstore');

      s += '</p></div>'

      return s;
    })());
  });

</script>


  </body>

</html>
