
# Database Design for OfferLadder

#Member(Student)


```
"CREATE TABLE IF NOT EXISTS student (".
"id_user INT NOT NULL AUTO_INCREMENT ,".
"name VARCHAR( 128 ) NOT NULL ,".
"email VARCHAR( 64 ) NOT NULL ,".
"username VARCHAR( 16 ) NOT NULL ,".
"password VARCHAR( 32 ) NOT NULL ,".
"confirmcode VARCHAR(32) ,".
"token INT NOT NULL DEFAULT '3' ,".
"cvdir VARCHAR( 256 ), ". //save the directory
"PRIMARY KEY ( id_user )".

status VARCHAR(32) NOT NULL,
create_time DATETIME NOT NULL,
")";

```

#Job


```
CREATE TABLE IF NOT EXISTS job (".
"jobId INT NOT NULL AUTO_INCREMENT ,".
"company VARCHAR (255) NOT NULL ,".
"title VARCHAR (255) NOT NULL ,".
"link VARCHAR (255) NOT NULL ,".
"location VARCHAR (100) NOT NULL ,".
"description TEXT NOT NULL ,".
"requirement TEXT ,".
"tag_state VARCHAR (255) NOT NULL DEFAULT 'Other', ".
"tag_company VARCHAR (255) NOT NULL DEFAULT 'Other', ".
"tag_type VARCHAR (255) NOT NULL DEFAULT 'Other', ".
"tag_salary VARCHAR (255) NOT NULL DEFAULT 'Other', ".
"tag_category VARCHAR (255) NOT NULL DEFAULT 'FULL TIME', ".
"tag_source VARCHAR (255) NOT NULL DEFAULT 'Referral', ".
"contact VARCHAR (255), ".
"display BOOLEAN NOT NULL DEFAULT TRUE,".
"FULLTEXT (company,title,location,description,requirement,tag_state,tag_company,tag_type,tag_category),".
"PRIMARY KEY (jobId)".
")";

```

#mentor
```
CREATE TABLE IF NOT EXISTS mentor (
mentorId  INT NOT NULL AUTO_INCREMENT,
name VARCHAR(128) NOT NULL,
photo_url  VARCHAR(255) NOT NULL,
title  VARCHAR(1000) NOT NULL,
email  VARCHAR(255) NOT NULL,
industry  VARCHAR(500) NOT NULL,
summary TEXT NOT NULL ,
education TEXT NOT NULL ,
positions TEXT NOT NULL ,
tag_service_career TINYINT NOT NULL DEFAULT 0,
tag_service_cv TINYINT NOT NULL DEFAULT 0,
tag_service_interview TINYINT NOT NULL DEFAULT 0,
tag_workyear VARCHAR(255) NOT NULL,
tag_function VARCHAR(255) NOT NULL,
tag_company VARCHAR(255) NOT NULL,
availability VARCHAR(2500) NOT NULL,
confirmcode VARCHAR(32),
display TINYINT NOT NULL DEFAULT 0,

create_time DATETIME NOT NULL,
resume_url VARCHAR(255) NOT NULL,
status VARCHAR(32) NOT NULL,
resume TEXT NOT NULL,
PRIMARY KEY (mentorId)
);

```

#mentor_account

```
CREATE TABLE IF NOT EXISTS mentor_account(
mentorId INT NOT NULL,
type  VARCHAR(32) NOT NULL,
create_time DATETIME NOT NULL,
account_info TEXT NOT NULL,
balance INT NOT NULL DEFAULT '0',
PRIMARY KEY(mentorId),
FOREIGN KEY (mentorId) REFERENCES mentor(mentorId)
)

```

#student_account

```
CREATE TABLE IF NOT EXISTS student_account(
studentId INT NOT NULL,
type  VARCHAR(32) NOT NULL,
create_time DATETIME NOT NULL,
account_info VARCHAR(255) NOT NULL,
token INT NOT NULL DEFAULT '3',
PRIMARY KEY(studentId),
FOREIGN KEY(studentId) REFERENCES student(id_user)
)
```

#production

```
CREATE TABLE IF NOT EXISTS production(
productionId INT NOT NULL,
owner INT NOT NULL,
name VARCHAR(128) NOT NULL,
description TEXT NOT NULL,
provider INT NOT NULL,
create_time DATETIME NOT NULL,
PRICE FLOAT NOT NULL,
PRIMARY KEY(productionId),
FOREIGN KEY(owner) REFERENCES mentor(mentorId)
)
```

#transaction

```
CREATE TABLE IF NOT EXISTS transaction(
transactionId INT NOT NULL,
studentId INT NOT NULL,
productId INT NOT NULL,
status VARCHAR(32) NOT NULL,
create_time DATETIME NOT NULL,
close_time DATETIME NOT NULL,
PRIMARY KEY(transactionId),
FOREIGN KEY(studentId) REFERENCES student(id_user),
FOREIGN KEY(productId) REFERENCES production(productionId)
)

```

#payment
```
CREATE TABLE IF NOT EXISTS payment(
paymentId INT NOT NULL,
type VARCHAR(32) NOT NULL,
transactionId INT NOT NULL,
status VARCHAR(32) NOT NULL,
PRIMARY KEY(paymentId),
FOREIGN KEY(transactionId) REFERENCES transaction(transactionId)
)
```

#transaction_activity

```
CREATE TABLE IF NOT EXISTS transaction_activity(
activityId INT NOT NULL,
transactionId INT NOT NULL,
activityType VARCHAR(32) NOT NULL,
activityTime DATETIME NOT NULL,
created_by VARCHAR(128) NOT NULL,
PRIMARY KEY(activityId),
FOREIGN KEY(transactionId) REFERENCES transaction(transactionId),
)
```

#student_production

```
CREATE TABLE IF NOT EXISTS studentproduction(
studentProductionId INT NOT NULL,
studentId INT NOT NULL,
productionId INT NOT NULL,
PRIMARY KEY(studentProductionId),
FOREIGN KEY(studentId) REFERENCES student(studentId),
FOREIGN KEY(productionId) REFERENCES production(productionId)

)
```
